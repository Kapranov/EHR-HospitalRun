$('#modal-lab-order').html('<%= escape_javascript(render 'form') %>');

initPickers('#modal-lab-order');
initSelect2('#modal-lab-order');
initModalFadeInOut('#modal-lab-order');

$('#modal-lab-order').modal('show');

var showViewOrdersSearchController = new ShowViewOrdersSearchController();
showViewOrdersSearchController.initialize(
  '#modal-lab-order',
  '#lab_order_patient_id',
  '#lab_order_patient_sex',
  '#lab_order_patient_age',
  '#lab_order_patient_date_of_birth',
  '#lab_order_patient_primary_phone',
  '#lab_order_find_patient',
  '.lab-order-find-patient-btn',
  '#primary_phone_container',
  '#patient_show_images',
  '.results-block',
  '<%= Rails.application.routes.url_helpers.patient_info_lab_orders_path %>'
);

var showViewOrdersTestsController = new ShowViewOrdersTestsController();
showViewOrdersTestsController.initialize(
  '#modal-lab-order',
  '#tests_container',
  '#tests_add',
  '#tests_remove',
  'lab'
);

var showViewOrdersValidationController = new ValidationController();
showViewOrdersValidationController.initialize(
  'form.edit_lab_order',
  {
    'lab_order[patient_id]': {
      required: {
        required: true
      }
    },
    'lab_order_find_patient': {
      required: {
        required: true
      }
    },
    'lab_order_patient_sex': {
      required: {
        required: true
      }
    },
    'lab_order_patient_age': {
      required: {
        required: true
      }
    },
    'lab_order_patient_date_of_birth': {
      required: {
        required: true
      }
    },
    'lab_order[order_type]': {
      required: {
        required: true
      }
    },
    'lab_order[lab_name]': {
      required: {
        required: true
      }
    },
    'lab_order[status]': {
      required: {
        required: true
      }
    },
    'lab_order[schedule_at_date]': {
      required: {
        required: true
      }
    },
    'lab_order[ordering_physician]': {
      required: {
        required: true
      }
    },
    'lab_order[ordering_facility]': {
      required: {
        required: true
      }
    },
    'lab_order[lab_status]': {
      required: {
        required: true
      }
    }
  }
);

var attachmentsController = new AttachmentsController();
attachmentsController.initialize(
  '#modal-lab-order',
  '#modal-lab-order #attachment_container',
  '#add_attachment',
  'lab_order[attachments][file_name_NUMBER_]'
);